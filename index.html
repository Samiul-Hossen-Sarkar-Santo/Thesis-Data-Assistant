<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A free, privacy-first research tool for viewing data files, extracting text from images (OCR), and converting between CSV, Excel, and JSON formats. All processing happens locally in your browser.">
    <meta name="keywords" content="thesis, research, data viewer, OCR, CSV, Excel, JSON, Bengali OCR, academic tool">
    <meta name="author" content="Samiul Hossen Sarkar Santo">
    <title>Thesis Data Assistant</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2'%3E%3Crect width='24' height='24' rx='4' fill='%232563eb'/%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253'/%3E%3C/svg%3E">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Libraries for Data -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    
    <!-- Libraries for Image -->
    <script src='https://unpkg.com/tesseract.js@4.1.1/dist/tesseract.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&family=Noto+Naskh+Arabic:wght@400;700&family=Noto+Sans:wght@400;700&family=Noto+Sans+Bengali:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;700&family=Noto+Serif+Bengali:wght@400;700&family=Tiro+Bangla:ital@0;1&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .font-noto-bengali { font-family: 'Noto Sans Bengali', sans-serif; }
        .font-tiro-bangla { font-family: 'Tiro Bangla', serif; }
        .font-hind-siliguri { font-family: 'Hind Siliguri', sans-serif; }
        .font-noto-devanagari { font-family: 'Noto Sans Devanagari', sans-serif; }
        .font-noto-arabic { font-family: 'Noto Naskh Arabic', serif; }
        .font-mono-code { font-family: 'Courier New', Courier, monospace; }
        .font-legal { font-family: 'Merriweather', serif; }
        
        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .drag-active { border-color: #3b82f6; background-color: #eff6ff; }
        /* Data Drop Zone Active State */
        .data-drag-overlay {
            background-color: rgba(239, 246, 255, 0.9);
            border: 2px dashed #3b82f6;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 h-screen flex flex-col font-sans">

    <!-- Top Navigation Bar -->
    <nav class="bg-white border-b border-slate-200 px-6 py-3 flex flex-col md:flex-row gap-4 justify-between items-center shadow-sm shrink-0 z-30 relative">
        <div class="flex items-center gap-3 w-full md:w-auto">
            <div class="bg-blue-600 text-white p-2 rounded-lg shadow-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                </svg>
            </div>
            <div>
                <h1 class="text-xl font-bold text-slate-800 leading-tight">Thesis Data Assistant</h1>
                <p class="text-xs text-slate-500">Universal Research Tool</p>
            </div>
        </div>

        <!-- Mode Switcher -->
        <div class="flex bg-slate-100 p-1 rounded-lg border border-slate-200 w-full md:w-auto overflow-x-auto">
            <button onclick="switchTab('data')" id="tab-data" class="whitespace-nowrap px-4 py-1.5 rounded-md text-sm font-medium transition-all bg-white text-blue-600 shadow-sm">Data Viewer</button>
            <button onclick="switchTab('image')" id="tab-image" class="whitespace-nowrap px-4 py-1.5 rounded-md text-sm font-medium text-slate-500 hover:text-slate-700 transition-all">Image Lab</button>
            <button onclick="switchTab('feedback')" id="tab-feedback" class="whitespace-nowrap px-4 py-1.5 rounded-md text-sm font-medium text-slate-500 hover:text-slate-700 transition-all">Feedback</button>
            <button onclick="switchTab('privacy')" id="tab-privacy" class="whitespace-nowrap px-4 py-1.5 rounded-md text-sm font-medium text-slate-500 hover:text-slate-700 transition-all">Legal & Disclaimer</button>
            <button onclick="switchTab('credits')" id="tab-credits" class="whitespace-nowrap px-4 py-1.5 rounded-md text-sm font-medium text-slate-500 hover:text-slate-700 transition-all">Credits</button>
        </div>
    </nav>

    <!-- ========================================== -->
    <!-- VIEW 1: DATA VIEWER                        -->
    <!-- ========================================== -->
    <div id="view-data" class="flex-1 flex flex-col overflow-hidden h-full relative">
        <!-- Toolbar -->
        <div class="bg-white border-b border-slate-200 px-6 py-3 flex flex-col md:flex-row gap-4 items-center shrink-0 z-20 relative">
            <input type="file" id="fileInput" class="hidden" accept=".csv,.xlsx,.xls,.json" onchange="handleFileUpload(event)">
            <label for="fileInput" class="cursor-pointer bg-blue-50 text-blue-700 hover:bg-blue-100 px-4 py-2 rounded-md font-medium text-sm transition flex items-center gap-2 border border-blue-200 whitespace-nowrap w-full md:w-auto justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                Upload Data
            </label>

            <div class="relative flex-1 w-full">
                <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-slate-400"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg></span>
                <input type="text" id="searchInput" placeholder="Search rows..." oninput="handleSearch(this.value)" class="pl-9 pr-4 py-2 w-full border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>

            <div class="flex items-center gap-2 w-full md:w-auto">
                <span class="text-xs font-semibold text-slate-400 uppercase tracking-wider whitespace-nowrap">Font:</span>
                <select id="fontSelector" onchange="changeTableFont(this.value)" class="flex-1 md:w-48 border border-slate-300 rounded-md text-sm py-2 px-2 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white">
                    <optgroup label="Bengali"><option value="font-noto-bengali" selected>Noto Sans Bengali</option><option value="font-tiro-bangla">Tiro Bangla</option><option value="font-hind-siliguri">Hind Siliguri</option></optgroup>
                    <optgroup label="Other"><option value="font-sans">Standard Sans</option><option value="font-mono-code">Monospace</option></optgroup>
                </select>
            </div>

            <div class="relative w-full md:w-auto">
                <button onclick="toggleExportMenu(event)" class="w-full bg-slate-800 text-white hover:bg-slate-900 px-4 py-2 rounded-md font-medium text-sm transition flex items-center justify-center gap-2 shadow-sm">
                    Convert <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                </button>
                <div id="exportMenu" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-slate-100 overflow-hidden hidden z-50">
                    <button onclick="exportData('xlsx')" class="block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50">To Excel (.xlsx)</button>
                    <button onclick="exportData('csv')" class="block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50">To CSV (.csv)</button>
                    <button onclick="exportData('json')" class="block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50">To JSON (.json)</button>
                </div>
            </div>
        </div>

        <!-- Table Container & Drop Zone -->
        <div id="dataViewContainer" class="flex-1 overflow-hidden relative bg-slate-50 transition-colors">
            <!-- Drag Overlay Message (Hidden by default) -->
            <div id="dataDragOverlay" class="hidden absolute inset-0 z-50 flex items-center justify-center bg-blue-50/90 pointer-events-none">
                <div class="text-center p-10 border-4 border-blue-400 border-dashed rounded-xl">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-blue-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" /></svg>
                    <h3 class="text-2xl font-bold text-blue-600">Drop File Here</h3>
                    <p class="text-blue-400 mt-2">Release to upload data</p>
                </div>
            </div>

            <div class="absolute inset-0 overflow-auto table-container px-6 py-4">
                <!-- Clickable Empty State -->
                <div id="emptyState" class="hidden flex flex-col items-center justify-center h-full text-slate-400 cursor-pointer hover:bg-slate-100 transition-all border-2 border-dashed border-transparent hover:border-slate-300 rounded-lg group" onclick="document.getElementById('fileInput').click()">
                    <div class="p-6 rounded-full bg-slate-100 group-hover:bg-white mb-4 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-slate-400 group-hover:text-blue-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                    </div>
                    <h3 class="text-lg font-semibold text-slate-600 group-hover:text-blue-600 transition-colors">No Data Loaded</h3>
                    <p class="text-sm group-hover:text-slate-500 transition-colors">Click anywhere here or Drag & Drop a file</p>
                    <p class="text-xs text-slate-300 mt-2">Supports CSV, Excel, JSON</p>
                </div>

                <table id="dataTable" class="min-w-full text-left border-collapse bg-white shadow-sm rounded-lg overflow-hidden font-noto-bengali hidden">
                    <thead class="bg-slate-100 text-slate-600 uppercase text-xs sticky top-0 z-10 shadow-sm"><tr id="tableHeader"></tr></thead>
                    <tbody id="tableBody" class="text-sm divide-y divide-slate-100"></tbody>
                </table>
            </div>
        </div>

        <footer class="bg-white border-t border-slate-200 px-6 py-3 shrink-0 flex justify-between items-center z-20">
            <div class="flex items-center gap-2">
                <button id="prevBtn" onclick="changePage(-1)" disabled class="px-3 py-1 border border-slate-300 rounded text-sm text-slate-600 hover:bg-slate-50 disabled:opacity-50">Previous</button>
                <span class="text-sm text-slate-500">Page <span id="currentPage" class="font-medium text-slate-800">1</span></span>
                <button id="nextBtn" onclick="changePage(1)" disabled class="px-3 py-1 border border-slate-300 rounded text-sm text-slate-600 hover:bg-slate-50 disabled:opacity-50">Next</button>
            </div>
            <div class="text-xs text-slate-400"><span id="rowCount">0 rows</span></div>
        </footer>
    </div>

    <!-- ========================================== -->
    <!-- VIEW 2: IMAGE LAB                          -->
    <!-- ========================================== -->
    <div id="view-image" class="hidden flex-1 overflow-auto bg-slate-50 p-6">
        <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6 h-full">
            <div class="flex flex-col gap-4 h-full">
                <div id="dropZone" class="border-2 border-dashed border-slate-300 rounded-lg bg-white p-8 flex flex-col items-center justify-center text-center transition-colors h-96 lg:h-auto lg:flex-1 relative group cursor-pointer hover:bg-blue-50 hover:border-blue-400">
                    <input type="file" id="imageInput" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" accept="image/*" onchange="handleImageUpload(event)">
                    <div id="uploadPrompt" class="pointer-events-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-slate-400 mb-3 group-hover:text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                        <p class="text-slate-600 font-medium">Click or Drag Image Here</p>
                        <p class="text-xs text-slate-400 mt-1">Supports JPG, PNG, WEBP</p>
                    </div>
                    <img id="imagePreview" class="hidden max-h-full max-w-full object-contain shadow-md rounded-md" alt="Preview">
                    <div id="changeImageOverlay" class="hidden absolute bottom-4 left-0 right-0 flex justify-center z-20 pointer-events-none">
                        <button onclick="document.getElementById('imageInput').click()" class="pointer-events-auto bg-white/90 hover:bg-white text-slate-700 shadow-lg border border-slate-200 px-4 py-2 rounded-full text-sm font-semibold transition backdrop-blur-sm flex items-center gap-2">
                            Change Image
                        </button>
                    </div>
                </div>
            </div>

            <div class="flex flex-col gap-6">
                <!-- OCR Tool -->
                <div class="bg-white rounded-lg shadow-sm border border-slate-200 p-6 flex flex-col flex-1">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="font-bold text-slate-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                            Text Extractor (OCR)
                        </h2>
                        <div class="flex items-center gap-2">
                            <label class="flex items-center gap-2 text-xs text-slate-500 cursor-pointer select-none">
                                <input type="checkbox" id="enhanceImg" checked class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                                Auto-Enhance
                            </label>
                            <select id="ocrLang" class="text-sm border border-slate-300 rounded px-2 py-1 bg-slate-50"><option value="eng">English</option><option value="ben">Bengali</option></select>
                        </div>
                    </div>
                    
                    <div class="relative flex-1">
                        <textarea id="ocrResult" placeholder="Extracted text will appear here..." class="w-full h-full min-h-[150px] p-3 border border-slate-200 rounded-md text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500 font-noto-bengali resize-none"></textarea>
                        <div id="ocrLoader" class="hidden absolute inset-0 bg-white/80 flex flex-col items-center justify-center text-sm font-medium text-blue-600">
                            <div class="loader mb-2"></div>
                            <span id="ocrStatus">Initializing...</span>
                        </div>
                    </div>
                    
                    <div class="mt-4 flex gap-3">
                        <button onclick="runOCR()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 rounded-md transition flex justify-center items-center gap-2">
                            Extract Text
                        </button>
                        <button onclick="copyOCRContent()" id="copyBtn" class="bg-slate-100 hover:bg-slate-200 text-slate-700 border border-slate-300 font-medium py-2 px-4 rounded-md transition flex items-center gap-2">
                            Copy
                        </button>
                    </div>
                </div>

                <!-- Tools Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow-sm border border-slate-200 p-6">
                        <h2 class="font-bold text-slate-700 mb-3 text-sm uppercase tracking-wide">Image Metadata</h2>
                        <div id="metaDataOutput" class="text-xs text-slate-500 space-y-1 h-32 overflow-y-auto font-mono bg-slate-50 p-3 rounded">No image loaded.</div>
                        <button onclick="extractMetadata()" class="mt-3 text-xs font-medium text-blue-600 hover:text-blue-800">Refresh Metadata</button>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-slate-200 p-6">
                        <h2 class="font-bold text-slate-700 mb-3 text-sm uppercase tracking-wide">Convert Format</h2>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="convertImage('image/jpeg', 'jpg')" class="bg-slate-100 hover:bg-slate-200 text-slate-700 py-1.5 rounded text-sm transition font-medium">JPG</button>
                            <button onclick="convertImage('image/png', 'png')" class="bg-slate-100 hover:bg-slate-200 text-slate-700 py-1.5 rounded text-sm transition font-medium">PNG</button>
                            <button onclick="convertImage('image/webp', 'webp')" class="bg-slate-100 hover:bg-slate-200 text-slate-700 py-1.5 rounded text-sm transition font-medium">WEBP</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================== -->
    <!-- VIEW 3: FEEDBACK                           -->
    <!-- ========================================== -->
    <div id="view-feedback" class="hidden flex-1 overflow-auto bg-slate-50 p-6">
        <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-sm border border-slate-200 p-8">
            <h2 class="text-2xl font-bold text-slate-800 mb-2">Send Feedback</h2>
            <p class="text-sm text-slate-500 mb-6">Found a bug or want a new feature? Send me a quick email.</p>
            
            <form id="feedbackForm" onsubmit="handleFeedbackSubmit(event)" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Feedback Type</label>
                    <select id="fbType" class="w-full border border-slate-300 rounded-md p-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none">
                        <option value="Feature Request">Request a Tool/Feature</option>
                        <option value="Bug Report">Report a Bug</option>
                        <option value="General">General Feedback</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Your Message</label>
                    <textarea id="fbMessage" rows="6" class="w-full border border-slate-300 rounded-md p-3 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="Describe the feature you need or the issue you faced..." required></textarea>
                </div>
                
                <div class="bg-blue-50 border border-blue-100 p-4 rounded-md text-sm text-blue-800 mb-4">
                    <strong>Note:</strong> Since we don't use a database to protect your privacy, this button will open your email client with the message pre-formatted.
                </div>

                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2.5 rounded-md transition flex justify-center items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                    Prepare Email
                </button>
            </form>
        </div>
    </div>

    <!-- ========================================== -->
    <!-- VIEW 4: PRIVACY                            -->
    <!-- ========================================== -->
    <div id="view-privacy" class="hidden flex-1 overflow-auto bg-gray-100 p-4 md:p-6 flex justify-center">
        <div class="w-full max-w-3xl bg-white shadow-md border border-gray-300 p-6 md:p-12 h-fit">
            <div class="border-b-2 border-gray-800 pb-6 mb-8 text-center">
                <h1 class="text-2xl md:text-3xl font-bold font-legal text-gray-900 uppercase tracking-widest mb-2 break-words">Legal Disclaimer</h1>
                <p class="text-xs text-gray-500 uppercase tracking-wider font-semibold">Data Privacy & Terms of Use</p>
            </div>
            <div class="prose prose-sm max-w-none text-gray-800 font-legal leading-relaxed text-justify break-words">
                <h3 class="uppercase text-xs font-bold tracking-widest text-gray-400 mb-4 border-b pb-1">01. Data Persistence & Architecture</h3>
                <p class="mb-6">The "Thesis Data Assistant" operates under a strict <strong>Client-Side Processing</strong> architecture. Unlike traditional web applications, this tool does not utilize a backend server, database, or cloud storage infrastructure for data processing. All operations—including file parsing, Optical Character Recognition (OCR), and file conversion—are executed locally within the user's browser memory (RAM).</p>
                <p class="mb-8 font-semibold">Consequentially, absolutely no data is transmitted to, stored in, or logged by the developers. Upon refreshing the page or closing the browser tab, all uploaded data is irreversibly purged from the volatile memory.</p>
                <h3 class="uppercase text-xs font-bold tracking-widest text-gray-400 mb-4 border-b pb-1">02. Limitation of Liability</h3>
                <p class="mb-6">This software is provided "as is", without warranty of any kind, express or implied. The developers make no representations regarding the accuracy, reliability, or completeness of the OCR results, file conversions, or data rendering. Users assume full responsibility for verifying the integrity of their data.</p>
                <p class="mb-8">In no event shall the developers be liable for any claim, damages, or other liability, whether in an action of contract, tort, or otherwise, arising from, out of, or in connection with the software or the use or other dealings in the software.</p>
                <h3 class="uppercase text-xs font-bold tracking-widest text-gray-400 mb-4 border-b pb-1">03. Third-Party Libraries & Credits</h3>
                <p class="mb-4">This application is powered by the following open-source technologies. We gratefully acknowledge their contributions:</p>
                <ul class="list-disc pl-5 mb-6 space-y-1 text-gray-700">
                    <li><a href="https://github.com/tailwindlabs/tailwindcss" target="_blank" rel="noopener noreferrer" class="text-blue-700 hover:underline font-semibold">Tailwind CSS</a>: Utility-first CSS framework for interface design.</li>
                    <li><a href="https://github.com/mholt/PapaParse" target="_blank" rel="noopener noreferrer" class="text-blue-700 hover:underline font-semibold">PapaParse</a>: Fast and powerful CSV parser for the browser.</li>
                    <li><a href="https://github.com/SheetJS/sheetjs" target="_blank" rel="noopener noreferrer" class="text-blue-700 hover:underline font-semibold">SheetJS (xlsx)</a>: Spreadsheet parser and writer for Excel files.</li>
                    <li><a href="https://github.com/naptha/tesseract.js" target="_blank" rel="noopener noreferrer" class="text-blue-700 hover:underline font-semibold">Tesseract.js</a>: Pure JavaScript port of the Tesseract OCR engine.</li>
                    <li><a href="https://github.com/exif-js/exif-js" target="_blank" rel="noopener noreferrer" class="text-blue-700 hover:underline font-semibold">Exif.js</a>: JavaScript library for reading EXIF image metadata.</li>
                    <li><a href="https://fonts.google.com" target="_blank" rel="noopener noreferrer" class="text-blue-700 hover:underline font-semibold">Google Fonts</a>: Noto, Tiro, and other open-source typefaces.</li>
                </ul>
                <p class="mb-6">Use of this tool constitutes acknowledgement of the respective open-source licenses of these dependencies.</p>
            </div>
            <div class="mt-12 pt-6 border-t border-gray-200 text-center">
                <p class="text-[10px] text-gray-400 font-mono">LAST UPDATED: 2026-01-20 &nbsp;|&nbsp; DOC. VER. 1.2</p>
            </div>
        </div>
    </div>

    <!-- ========================================== -->
    <!-- VIEW 5: CREDITS                            -->
    <!-- ========================================== -->
    <div id="view-credits" class="hidden flex-1 overflow-auto bg-slate-50 p-6">
        <div class="max-w-5xl mx-auto flex flex-col lg:flex-row gap-6 items-stretch">
            
            <!-- Left: About Me Card -->
            <div class="flex-1 bg-white rounded-lg shadow-sm border border-slate-200 p-8 text-center">
                <img src="Samiul Hossen Sarkar Santo.png" alt="Samiul Hossen Sarkar Santo" class="w-28 h-28 rounded-full object-cover object-top mx-auto mb-4 shadow-xl border-2 border-blue-100">
                <h2 class="text-2xl font-bold text-slate-800 mb-1">Samiul Hossen Sarkar Santo</h2>
                <p class="text-sm text-slate-500 font-medium uppercase tracking-wide mb-6">Researcher & Developer</p>
                
                <div class="max-w-l mx-auto text-slate-700 mb-8 leading-relaxed text-sm">
                    <p>
                        I built this tool to simplify data processing tasks common in academic research. 
                        From fixing font issues in archival data to extracting text from field images, 
                        this assistant aims to make the technical side of your thesis smoother. If you 
                        feel like it can be improved or have ideas for new features, please reach out!
                        And if you found it useful, consider sharing it with fellow researchers.
                    </p>
                </div>

                <div class="flex justify-center gap-4 flex-wrap">
                    <a href="https://samiul-hossen-sarkar-santo.web.app" class="px-5 py-2.5 bg-slate-800 text-white rounded-full text-sm font-medium hover:bg-slate-900 transition flex items-center gap-2 shadow-sm" target="_blank" rel="noopener noreferrer">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" /></svg>
                        Visit Portfolio
                    </a>
                    <a href="mailto:samiulhossen1530@gmail.com" class="px-5 py-2.5 border border-slate-300 text-slate-700 rounded-full text-sm font-medium hover:bg-slate-50 transition flex items-center gap-2 shadow-sm" target="_blank" rel="noopener noreferrer">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                        Contact Me
                    </a>
                </div>

                <!-- License Notice -->
                <div class="mt-8 pt-6 border-t border-slate-200">
                    <p class="text-xs text-slate-400">
                        © 2026 Samiul Hossen Sarkar Santo. Released under the 
                        <a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer" class="text-blue-500 hover:underline">MIT License</a>.
                    </p>
                </div>
            </div>

            <!-- Right: Support Section -->
            <div class="lg:w-80 bg-gradient-to-br from-pink-50 to-orange-50 rounded-lg shadow-sm border border-pink-100 p-6 text-center flex flex-col">
                <div class="flex justify-center mb-3">
                    <span class="text-4xl">☕</span>
                </div>
                <h3 class="text-lg font-bold text-slate-800 mb-2">Support This Project</h3>
                <p class="text-sm text-slate-500 mb-4">If this tool helped your research, consider buying me a coffee. Any amount is much appreciated!</p>
                
                <div class="space-y-3 flex-1">
                    <!-- bKash -->
                    <div class="flex items-center justify-between bg-white rounded-lg px-4 py-3 border border-pink-200">
                        <div class="flex items-center gap-3">
                            <span class="text-pink-600 font-bold text-sm bg-pink-100 px-2 py-1 rounded">bKash</span>
                            <span class="text-slate-700 font-mono text-sm">01872090379</span>
                        </div>
                        <button onclick="copyToClipboard('01872090379', this)" class="text-xs text-blue-600 hover:text-blue-800 font-medium">Copy</button>
                    </div>
                    
                    <!-- Nagad -->
                    <div class="flex items-center justify-between bg-white rounded-lg px-4 py-3 border border-orange-200">
                        <div class="flex items-center gap-3">
                            <span class="text-orange-600 font-bold text-sm bg-orange-100 px-2 py-1 rounded">Nagad</span>
                            <span class="text-slate-700 font-mono text-sm">01872090379</span>
                        </div>
                        <button onclick="copyToClipboard('01872090379', this)" class="text-xs text-blue-600 hover:text-blue-800 font-medium">Copy</button>
                    </div>
                </div>
                
                <p class="text-xs text-slate-400 mt-4">Personal number. No merchant fees = 100% goes to development ❤️</p>
            </div>
            
        </div>
    </div>

    <!-- Hidden Canvas for Image Processing -->
    <canvas id="processCanvas" class="hidden"></canvas>

    <script>
        // --- GLOBAL STATE ---
        let currentMode = 'data';
        let rawData = [];
        let filteredData = [];
        let tableHeaders = [];
        let currentPage = 1;
        const rowsPerPage = 100;
        let currentFileName = "data";
        let loadedImage = null;

        document.addEventListener('DOMContentLoaded', () => {
            updateUIState();
            setupImageDragDrop();
            setupDataDragDrop();
        });

        // --- TAB SWITCHING ---
        function switchTab(mode) {
            currentMode = mode;
            ['data', 'image', 'feedback', 'privacy', 'credits'].forEach(t => {
                const btn = document.getElementById(`tab-${t}`);
                const view = document.getElementById(`view-${t}`);
                if (t === mode) {
                    btn.className = "whitespace-nowrap px-4 py-1.5 rounded-md text-sm font-medium transition-all bg-white text-blue-600 shadow-sm";
                    view.classList.remove('hidden');
                } else {
                    btn.className = "whitespace-nowrap px-4 py-1.5 rounded-md text-sm font-medium text-slate-500 hover:text-slate-700 transition-all";
                    view.classList.add('hidden');
                }
            });
        }

        // ==========================================
        // DATA VIEWER LOGIC
        // ==========================================
        function toggleExportMenu(e) { e.stopPropagation(); document.getElementById('exportMenu').classList.toggle('hidden'); }
        window.addEventListener('click', () => { document.getElementById('exportMenu').classList.add('hidden'); });

        // -- Unified File Loader --
        function loadDataFile(file) {
            if (!file) return;
            const maxSize = 50 * 1024 * 1024; // 50MB
            if (file.size > maxSize) {
                if (!confirm(`This file is ${(file.size / 1024 / 1024).toFixed(1)}MB. Large files may slow down your browser. Continue?`)) return;
            }
            currentFileName = file.name.split('.').slice(0, -1).join('.');
            
            if (file.name.endsWith('.csv')) {
                Papa.parse(file, { header: true, skipEmptyLines: true, complete: (res) => processData(res.data, Object.keys(res.data[0])), error: (err) => alert("CSV Error: " + err.message) });
            } else if (file.name.match(/\.(xlsx|xls)$/)) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const wb = XLSX.read(new Uint8Array(e.target.result), { type: 'array' });
                        const json = XLSX.utils.sheet_to_json(wb.Sheets[wb.SheetNames[0]], { defval: "" });
                        if(json.length) processData(json, Object.keys(json[0])); else alert("Empty Excel file");
                    } catch (e) { alert("Error reading Excel file. Make sure it's valid."); }
                };
                reader.readAsArrayBuffer(file);
            } else if (file.name.endsWith('.json')) {
                const reader = new FileReader();
                reader.onload = (e) => { try { const json = JSON.parse(e.target.result); if(Array.isArray(json) && json.length) processData(json, Object.keys(json[0])); } catch(err) { alert("Invalid JSON"); } };
                reader.readAsText(file);
            } else {
                alert("Unsupported file type. Please drop a CSV, Excel, or JSON file.");
            }
        }

        function handleFileUpload(event) {
            loadDataFile(event.target.files[0]);
        }

        // -- Drag & Drop for Data --
        function setupDataDragDrop() {
            const container = document.getElementById('dataViewContainer');
            const overlay = document.getElementById('dataDragOverlay');
            let dragCounter = 0;

            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => {
                container.addEventListener(e, (ev) => { ev.preventDefault(); ev.stopPropagation(); });
            });

            container.addEventListener('dragenter', (e) => {
                dragCounter++;
                overlay.classList.remove('hidden');
            });

            container.addEventListener('dragleave', (e) => {
                dragCounter--;
                if (dragCounter === 0) overlay.classList.add('hidden');
            });

            container.addEventListener('drop', (e) => {
                dragCounter = 0;
                overlay.classList.add('hidden');
                if (e.dataTransfer.files.length) {
                    loadDataFile(e.dataTransfer.files[0]);
                }
            });
        }

        function processData(data, headers) {
            rawData = data; filteredData = [...rawData]; tableHeaders = headers; currentPage = 1;
            document.getElementById('searchInput').value = ''; updateUIState(); renderTable();
        }

        function updateUIState() {
            const hasData = rawData.length > 0;
            document.getElementById('emptyState').classList.toggle('hidden', hasData);
            document.getElementById('dataTable').classList.toggle('hidden', !hasData);
            if (hasData) document.getElementById('rowCount').textContent = `${filteredData.length} rows`;
        }

        function renderTable() {
            const head = document.getElementById('tableHeader'); const body = document.getElementById('tableBody');
            head.innerHTML = ''; body.innerHTML = '';
            
            const thIdx = document.createElement('th'); thIdx.className = "px-6 py-3 font-semibold border-b bg-slate-100 text-xs text-slate-500 w-16"; thIdx.textContent = "#"; head.appendChild(thIdx);
            
            tableHeaders.forEach(h => { 
                const th = document.createElement('th'); 
                th.className = "px-6 py-3 font-semibold border-b text-slate-600 uppercase text-xs tracking-wider min-w-[150px]"; 
                th.textContent = h; 
                head.appendChild(th); 
            });

            const start = (currentPage - 1) * rowsPerPage; const end = Math.min(start + rowsPerPage, filteredData.length);
            const fragment = document.createDocumentFragment();
            filteredData.slice(start, end).forEach((row, i) => {
                const tr = document.createElement('tr'); tr.className = "hover:bg-blue-50 transition-colors duration-150 group";
                const tdIdx = document.createElement('td'); tdIdx.className = "px-6 py-4 border-b text-slate-400 font-mono text-xs"; tdIdx.textContent = start + i + 1; tr.appendChild(tdIdx);
                
                tableHeaders.forEach(h => { 
                    const td = document.createElement('td'); 
                    td.className = "px-6 py-4 border-b text-slate-800 break-words max-w-xs align-top"; 
                    td.textContent = row[h] !== undefined ? String(row[h]) : ""; 
                    tr.appendChild(td); 
                });
                fragment.appendChild(tr);
            });
            body.appendChild(fragment);
            document.getElementById('currentPage').textContent = currentPage;
            document.getElementById('prevBtn').disabled = currentPage === 1;
            document.getElementById('nextBtn').disabled = end >= filteredData.length;
            document.getElementById('rowCount').textContent = `${filteredData.length} rows`;
        }

        function changePage(dir) { currentPage += dir; document.querySelector('.table-container').scrollTop = 0; renderTable(); }
        function handleSearch(q) { 
            const lq = q.toLowerCase(); 
            filteredData = !lq ? [...rawData] : rawData.filter(r => tableHeaders.some(h => String(r[h]||'').toLowerCase().includes(lq)));
            currentPage = 1; renderTable(); updateUIState(); 
        }
        function changeTableFont(cls) { document.getElementById('dataTable').className = `min-w-full text-left border-collapse bg-white shadow-sm rounded-lg overflow-hidden ${cls}`; }
        function exportData(fmt) {
            document.getElementById('exportMenu').classList.add('hidden');
            if (!filteredData.length) return alert("No data!");
            const name = `${currentFileName}_converted`;
            if (fmt === 'json') downloadFile("data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(filteredData, null, 2)), `${name}.json`);
            else if (fmt === 'csv') downloadFile(URL.createObjectURL(new Blob([Papa.unparse(filteredData)], {type: 'text/csv;charset=utf-8;'})), `${name}.csv`);
            else if (fmt === 'xlsx') { const wb = XLSX.utils.book_new(); XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(filteredData), "Data"); XLSX.writeFile(wb, `${name}.xlsx`); }
        }
        function downloadFile(url, name) { const a = document.createElement('a'); a.href = url; a.download = name; document.body.appendChild(a); a.click(); a.remove(); }

        // ==========================================
        // IMAGE LAB LOGIC
        // ==========================================
        function setupImageDragDrop() {
            const zone = document.getElementById('dropZone');
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => zone.addEventListener(e, (ev) => { ev.preventDefault(); ev.stopPropagation(); }));
            ['dragenter', 'dragover'].forEach(e => zone.addEventListener(e, () => zone.classList.add('drag-active')));
            ['dragleave', 'drop'].forEach(e => zone.addEventListener(e, () => zone.classList.remove('drag-active')));
            zone.addEventListener('drop', (e) => { if(e.dataTransfer.files.length) handleImageFile(e.dataTransfer.files[0]); });
        }
        function handleImageUpload(e) { if(e.target.files.length) handleImageFile(e.target.files[0]); }
        function handleImageFile(file) {
            if (!file.type.startsWith('image/')) return alert("Not an image!");
            const maxSize = 20 * 1024 * 1024; // 20MB
            if (file.size > maxSize) {
                if (!confirm(`This image is ${(file.size / 1024 / 1024).toFixed(1)}MB. Large images may slow down OCR. Continue?`)) return;
            }
            loadedImage = file;
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = document.getElementById('imagePreview');
                img.src = e.target.result; img.classList.remove('hidden');
                document.getElementById('uploadPrompt').classList.add('hidden');
                document.getElementById('changeImageOverlay').classList.remove('hidden');
                document.getElementById('ocrResult').value = '';
                document.getElementById('metaDataOutput').innerHTML = '<span class="text-slate-400">Click "Refresh Metadata" to analyze.</span>';
                setTimeout(extractMetadata, 500);
            };
            reader.readAsDataURL(file);
        }

        // --- PRE-PROCESSING FOR OCR ---
        function preprocessImageForOCR(imgEl) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const scaleFactor = 2.5; 
            canvas.width = imgEl.naturalWidth * scaleFactor;
            canvas.height = imgEl.naturalHeight * scaleFactor;
            ctx.drawImage(imgEl, 0, 0, canvas.width, canvas.height);
            const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imgData.data;
            for (let i = 0; i < data.length; i += 4) {
                const r = data[i], g = data[i+1], b = data[i+2];
                let gray = 0.21 * r + 0.72 * g + 0.07 * b;
                data[i] = data[i+1] = data[i+2] = gray;
            }
            ctx.putImageData(imgData, 0, 0);
            return canvas.toDataURL('image/png');
        }

        function runOCR() {
            if (!loadedImage) return alert("Upload an image first.");
            const loader = document.getElementById('ocrLoader');
            const status = document.getElementById('ocrStatus');
            const lang = document.getElementById('ocrLang').value;
            const enhance = document.getElementById('enhanceImg').checked;
            
            loader.classList.remove('hidden');
            const imgEl = document.getElementById('imagePreview');
            let srcToUse;
            
            if (enhance) {
                status.textContent = "Enhancing (Upscale & Grayscale)...";
                srcToUse = preprocessImageForOCR(imgEl);
            } else {
                status.textContent = "Processing Raw Image...";
                srcToUse = imgEl.src;
            }

            status.textContent = "Initializing Engine...";
            Tesseract.recognize(srcToUse, lang, {
                logger: m => { if (m.status === 'recognizing text') status.textContent = `Scanning... ${Math.round(m.progress * 100)}%`; else status.textContent = m.status; }
            }).then(({ data: { text } }) => {
                document.getElementById('ocrResult').value = text;
                loader.classList.add('hidden');
            }).catch(err => { console.error(err); alert("OCR Failed."); loader.classList.add('hidden'); });
        }

        function copyOCRContent() {
            const text = document.getElementById('ocrResult').value;
            if(!text) return;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.getElementById('copyBtn');
                const orig = btn.innerHTML;
                btn.innerHTML = 'Copied!'; btn.classList.add('text-green-600', 'bg-green-50');
                setTimeout(() => { btn.innerHTML = orig; btn.classList.remove('text-green-600', 'bg-green-50'); }, 2000);
            });
        }

        function copyToClipboard(text, btn) {
            navigator.clipboard.writeText(text).then(() => {
                const orig = btn.textContent;
                btn.textContent = 'Copied!';
                btn.classList.add('text-green-600');
                setTimeout(() => { btn.textContent = orig; btn.classList.remove('text-green-600'); }, 2000);
            });
        }

        function extractMetadata() {
            if (!loadedImage) return;
            const imgEl = document.getElementById('imagePreview');
            const output = document.getElementById('metaDataOutput');
            output.innerHTML = "Analyzing...";
            EXIF.getData(imgEl, function() {
                const allTags = EXIF.getAllTags(this);
                let html = `<div><span class="font-bold">File:</span> ${loadedImage.name}</div><div><span class="font-bold">Size:</span> ${(loadedImage.size / 1024).toFixed(2)} KB</div>`;
                if (!Object.keys(allTags).length) html += `<div class="mt-2 text-amber-600">No EXIF data.</div>`;
                else for (let tag in allTags) { if(tag!=='thumbnail' && typeof allTags[tag]!=='object') html += `<div><span class="font-bold">${tag}:</span> ${allTags[tag]}</div>`; }
                output.innerHTML = html;
            });
        }

        function convertImage(mime, ext) {
            if (!loadedImage) return alert("No image!");
            const img = document.getElementById('imagePreview');
            const cvs = document.createElement('canvas');
            cvs.width = img.naturalWidth; cvs.height = img.naturalHeight;
            cvs.getContext('2d').drawImage(img, 0, 0);
            const a = document.createElement('a'); a.download = `converted.${ext}`; a.href = cvs.toDataURL(mime, 0.9);
            document.body.appendChild(a); a.click(); a.remove();
        }

        // ==========================================
        // FEEDBACK LOGIC
        // ==========================================
        function handleFeedbackSubmit(e) {
            e.preventDefault();
            const type = document.getElementById('fbType').value;
            const msg = document.getElementById('fbMessage').value;
            const subject = encodeURIComponent(`[Thesis Tool Feedback] ${type}`);
            const body = encodeURIComponent(`Feedback Type: ${type}\n\nMessage:\n${msg}`);
            const myEmail = "samiulhossen1530@gmail.com"; 
            window.location.href = `mailto:${myEmail}?subject=${subject}&body=${body}`;
        }
    </script>
</body>
</html>